#!/bin/sh

# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (C) 2025 ROCKNIX

# Serial device
SERIAL_DEVICE="/dev/ttyHS0"

# Open serial device
stty -F $SERIAL_DEVICE 115200 -clocal -opost -isig -icanon -echo

# Send frame to switch gampead to fake xbox 360 controller
printf "\xe7\x55\x05\x01\x00\x00\x00\x00\x00\x5b\xed" >$SERIAL_DEVICE
sleep 0.1
printf "\x35\x35\x30\x35\x30\x31\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30" >$SERIAL_DEVICE
